This is just a basic linux device driver.
This will explains spinlock in the linux device driver.

The original source was from 
https://embetronicx.com/tutorials/linux/device-drivers/
